<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Final - JavaScript Corrigido</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .salon-card { border: 2px solid #ddd; padding: 15px; margin: 10px; border-radius: 8px; cursor: pointer; }
        .salon-card.selected { border-color: #007bff; background-color: #f0f8ff; }
        .salon-select-btn { background: #007bff; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; }
        .result { background: #d4edda; padding: 15px; margin: 20px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>üß™ Teste Final - JavaScript Corrigido</h1>
    
    <div class="salon-card" data-salon-id="1">
        <h3 class="card-title">Sal√£o Teste 1</h3>
        <p>Endere√ßo: Rua Teste, 123</p>
        <button class="salon-select-btn">Agendar Aqui</button>
    </div>
    
    <div class="salon-card" data-salon-id="2">
        <h3 class="card-title">Sal√£o Teste 2</h3>
        <p>Endere√ßo: Av. Exemplo, 456</p>
        <button class="salon-select-btn">Agendar Aqui</button>
    </div>
    
    <div id="resultado" class="result" style="display: none;">
        <h3>‚úÖ Resultado do Teste:</h3>
        <p id="resultado-texto"></p>
    </div>
    
    <script>
        // Fun√ß√£o simulada selecionarSalao
        function selecionarSalao(card, salonId, salonName) {
            console.log('selecionarSalao chamada:', { card, salonId, salonName });
            
            // Remover sele√ß√£o anterior
            document.querySelectorAll('.salon-card').forEach(c => c.classList.remove('selected'));
            
            // Adicionar sele√ß√£o atual
            card.classList.add('selected');
            
            // Mostrar resultado
            const resultado = document.getElementById('resultado');
            const texto = document.getElementById('resultado-texto');
            texto.innerHTML = `<strong>Sal√£o selecionado:</strong> ${salonName} (ID: ${salonId})<br><strong>Hora:</strong> ${new Date().toLocaleTimeString()}`;
            resultado.style.display = 'block';
        }
        
        // C√≥digo JavaScript corrigido do agendar.php
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM carregado - Iniciando configura√ß√£o de eventos');
            
            // Adicionar event listeners aos bot√µes de sele√ß√£o de sal√£o
            document.querySelectorAll('.salon-select-btn').forEach(function(btn) {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Bot√£o clicado:', this);
                    
                    const card = this.closest('.salon-card');
                    const salonId = card.getAttribute('data-salon-id');
                    const salonName = card.querySelector('.card-title').textContent;
                    
                    console.log('Dados extra√≠dos:', { salonId, salonName });
                    selecionarSalao(card, salonId, salonName);
                });
            });
            
            // Adicionar event listeners aos pr√≥prios cards de sal√£o
            document.querySelectorAll('.salon-card').forEach(function(card) {
                card.addEventListener('click', function(e) {
                    // N√£o executar se clicou no bot√£o (evitar duplo evento)
                    if (e.target.closest('.salon-select-btn')) {
                        console.log('Clique no bot√£o - ignorando evento do card');
                        return;
                    }
                    
                    console.log('Card clicado:', this);
                    
                    const salonId = this.getAttribute('data-salon-id');
                    const salonName = this.querySelector('.card-title').textContent;
                    
                    console.log('Dados extra√≠dos do card:', { salonId, salonName });
                    selecionarSalao(this, salonId, salonName);
                });
            });
            
            console.log('‚úÖ Todos os event listeners configurados com sucesso!');
        });
    </script>
</body>
</html>