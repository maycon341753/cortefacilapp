<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendar Servi√ßo - CorteF√°cil</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">CorteF√°cil</a>
                <nav>
                    <ul class="nav-menu">
                        <li><a href="index.html">In√≠cio</a></li>
                        <li><a href="dashboard-client.html">Meus Agendamentos</a></li>
                        <li><a href="#" onclick="logout()">Sair</a></li>
                    </ul>
                    <button class="mobile-menu-toggle">‚ò∞</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="padding: 2rem 0;">
        <div class="row">
            <div class="col-md-8" style="margin: 0 auto;">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Agendar Servi√ßo</h2>
                        <p>Escolha o sal√£o, servi√ßo e hor√°rio desejado</p>
                    </div>

                    <!-- Formul√°rio de Agendamento -->
                    <form id="booking-form" class="booking-system" data-validate>
                        <!-- Passo 1: Selecionar Sal√£o -->
                        <div class="booking-step" id="step-salon">
                            <h3>1. Escolha o Sal√£o</h3>
                            <div class="salons-grid">
                                <div class="salon-card" data-salon-id="1">
                                    <div class="salon-image">üè™</div>
                                    <h4>Sal√£o Beleza Total</h4>
                                    <p>Rua das Flores, 123 - Centro</p>
                                    <div class="salon-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.8)</div>
                                    <button type="button" class="btn btn-outline">Selecionar</button>
                                </div>
                                
                                <div class="salon-card" data-salon-id="2">
                                    <div class="salon-image">üíá</div>
                                    <h4>Studio Hair & Beauty</h4>
                                    <p>Av. Principal, 456 - Jardins</p>
                                    <div class="salon-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.9)</div>
                                    <button type="button" class="btn btn-outline">Selecionar</button>
                                </div>
                                
                                <div class="salon-card" data-salon-id="3">
                                    <div class="salon-image">‚ú®</div>
                                    <h4>Espa√ßo Glamour</h4>
                                    <p>Rua da Moda, 789 - Vila Nova</p>
                                    <div class="salon-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.7)</div>
                                    <button type="button" class="btn btn-outline">Selecionar</button>
                                </div>
                            </div>
                        </div>

                        <!-- Passo 2: Selecionar Servi√ßo -->
                        <div class="booking-step" id="step-service" style="display: none;">
                            <h3>2. Escolha o Servi√ßo</h3>
                            <div class="services-grid">
                                <div class="service-card" data-service-id="1" data-price="35.00">
                                    <div class="service-icon">‚úÇÔ∏è</div>
                                    <h4>Corte Feminino</h4>
                                    <p>Corte moderno e estiloso</p>
                                    <div class="service-price">R$ 35,00</div>
                                    <button type="button" class="btn btn-outline">Selecionar</button>
                                </div>
                                
                                <div class="service-card" data-service-id="2" data-price="25.00">
                                    <div class="service-icon">‚úÇÔ∏è</div>
                                    <h4>Corte Masculino</h4>
                                    <p>Corte cl√°ssico ou moderno</p>
                                    <div class="service-price">R$ 25,00</div>
                                    <button type="button" class="btn btn-outline">Selecionar</button>
                                </div>
                                
                                <div class="service-card" data-service-id="3" data-price="80.00">
                                    <div class="service-icon">üé®</div>
                                    <h4>Colora√ß√£o</h4>
                                    <p>Tintura completa</p>
                                    <div class="service-price">R$ 80,00</div>
                                    <button type="button" class="btn btn-outline">Selecionar</button>
                                </div>
                                
                                <div class="service-card" data-service-id="4" data-price="60.00">
                                    <div class="service-icon">üíÜ</div>
                                    <h4>Escova</h4>
                                    <p>Escova modeladora</p>
                                    <div class="service-price">R$ 60,00</div>
                                    <button type="button" class="btn btn-outline">Selecionar</button>
                                </div>
                            </div>
                        </div>

                        <!-- Passo 3: Selecionar Data e Hor√°rio -->
                        <div class="booking-step" id="step-datetime" style="display: none;">
                            <h3>3. Escolha Data e Hor√°rio</h3>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">Data</label>
                                        <input type="date" name="data" class="form-control" required 
                                               min="" id="date-input">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">Profissional</label>
                                        <select name="profissional" class="form-control form-select" required>
                                            <option value="">Selecione...</option>
                                            <option value="1">Maria Silva</option>
                                            <option value="2">Jo√£o Santos</option>
                                            <option value="3">Ana Costa</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Hor√°rios Dispon√≠veis</label>
                                <div class="time-slots" id="horarios">
                                    <!-- Hor√°rios ser√£o carregados dinamicamente -->
                                </div>
                            </div>
                        </div>

                        <!-- Passo 4: Confirma√ß√£o -->
                        <div class="booking-step" id="step-confirmation" style="display: none;">
                            <h3>4. Confirma√ß√£o</h3>
                            
                            <div class="booking-summary">
                                <h4>Resumo do Agendamento</h4>
                                <div class="summary-item">
                                    <strong>Sal√£o:</strong> <span id="summary-salon">-</span>
                                </div>
                                <div class="summary-item">
                                    <strong>Servi√ßo:</strong> <span id="summary-service">-</span>
                                </div>
                                <div class="summary-item">
                                    <strong>Data:</strong> <span id="summary-date">-</span>
                                </div>
                                <div class="summary-item">
                                    <strong>Hor√°rio:</strong> <span id="summary-time">-</span>
                                </div>
                                <div class="summary-item">
                                    <strong>Profissional:</strong> <span id="summary-professional">-</span>
                                </div>
                                <div class="summary-item total">
                                    <strong>Total:</strong> <span id="summary-price">R$ 0,00</span>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-100" id="confirm-booking">
                                Confirmar Agendamento
                            </button>
                        </div>

                        <!-- Navega√ß√£o entre passos -->
                        <div class="booking-navigation">
                            <button type="button" class="btn btn-secondary" id="prev-step" style="display: none;">
                                Voltar
                            </button>
                            <button type="button" class="btn btn-primary" id="next-step" style="display: none;">
                                Pr√≥ximo
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>CorteF√°cil</h3>
                    <p>A plataforma que conecta clientes e sal√µes de beleza de forma simples e eficiente.</p>
                </div>
                <div class="footer-section">
                    <h3>Links R√°pidos</h3>
                    <ul>
                        <li><a href="index.html">In√≠cio</a></li>
                        <li><a href="dashboard-client.html">Meus Agendamentos</a></li>
                        <li><a href="booking.html">Novo Agendamento</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 CorteF√°cil. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="assets/js/main.js"></script>
    <script>
        // Funcionalidade espec√≠fica da p√°gina de agendamento
        document.addEventListener('DOMContentLoaded', function() {
            let currentStep = 1;
            let selectedData = {
                salon: null,
                service: null,
                date: null,
                time: null,
                professional: null,
                price: 0
            };
            
            // Verificar se usu√°rio est√° logado
            if (!localStorage.getItem('userType')) {
                window.location.href = 'login.html';
                return;
            }
            
            // Estilos espec√≠ficos da p√°gina
            const style = document.createElement('style');
            style.textContent = `
                .salons-grid, .services-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                    gap: 1.5rem;
                    margin: 1.5rem 0;
                }
                
                .salon-card, .service-card {
                    background: white;
                    border: 2px solid #e1e5e9;
                    border-radius: 15px;
                    padding: 1.5rem;
                    text-align: center;
                    cursor: pointer;
                    transition: all 0.3s ease;
                }
                
                .salon-card:hover, .service-card:hover {
                    border-color: #667eea;
                    transform: translateY(-5px);
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                }
                
                .salon-card.selected, .service-card.selected {
                    border-color: #667eea;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                }
                
                .salon-image, .service-icon {
                    font-size: 3rem;
                    margin-bottom: 1rem;
                }
                
                .salon-rating {
                    margin: 0.5rem 0;
                    font-size: 0.9rem;
                }
                
                .service-price {
                    font-size: 1.2rem;
                    font-weight: bold;
                    color: #667eea;
                    margin: 0.5rem 0;
                }
                
                .salon-card.selected .service-price,
                .service-card.selected .service-price {
                    color: white;
                }
                
                .booking-summary {
                    background: #f8f9fa;
                    padding: 2rem;
                    border-radius: 10px;
                    margin-bottom: 2rem;
                }
                
                .summary-item {
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 0.5rem;
                    padding-bottom: 0.5rem;
                    border-bottom: 1px solid #dee2e6;
                }
                
                .summary-item.total {
                    font-size: 1.2rem;
                    border-bottom: none;
                    margin-top: 1rem;
                    padding-top: 1rem;
                    border-top: 2px solid #667eea;
                }
                
                .booking-navigation {
                    display: flex;
                    justify-content: space-between;
                    margin-top: 2rem;
                    padding-top: 2rem;
                    border-top: 1px solid #dee2e6;
                }
            `;
            document.head.appendChild(style);
            
            // Configurar data m√≠nima (hoje)
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date-input').min = today;
            
            // Sele√ß√£o de sal√£o
            document.querySelectorAll('.salon-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.salon-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    selectedData.salon = {
                        id: this.getAttribute('data-salon-id'),
                        name: this.querySelector('h4').textContent
                    };
                    
                    document.getElementById('next-step').style.display = 'block';
                });
            });
            
            // Sele√ß√£o de servi√ßo
            document.querySelectorAll('.service-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.service-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    selectedData.service = {
                        id: this.getAttribute('data-service-id'),
                        name: this.querySelector('h4').textContent,
                        price: parseFloat(this.getAttribute('data-price'))
                    };
                    selectedData.price = selectedData.service.price;
                    
                    document.getElementById('next-step').style.display = 'block';
                });
            });
            
            // Mudan√ßa de data
            document.querySelector('input[name="data"]').addEventListener('change', function() {
                selectedData.date = this.value;
                loadAvailableTimes();
            });
            
            // Mudan√ßa de profissional
            document.querySelector('select[name="profissional"]').addEventListener('change', function() {
                selectedData.professional = {
                    id: this.value,
                    name: this.options[this.selectedIndex].text
                };
                loadAvailableTimes();
            });
            
            // Navega√ß√£o entre passos
            document.getElementById('next-step').addEventListener('click', nextStep);
            document.getElementById('prev-step').addEventListener('click', prevStep);
            
            // Submiss√£o do formul√°rio
            document.getElementById('booking-form').addEventListener('submit', function(e) {
                e.preventDefault();
                confirmBooking();
            });
            
            function nextStep() {
                if (currentStep < 4) {
                    document.getElementById(`step-${getStepName(currentStep)}`).style.display = 'none';
                    currentStep++;
                    document.getElementById(`step-${getStepName(currentStep)}`).style.display = 'block';
                    
                    updateNavigation();
                    
                    if (currentStep === 4) {
                        updateSummary();
                    }
                }
            }
            
            function prevStep() {
                if (currentStep > 1) {
                    document.getElementById(`step-${getStepName(currentStep)}`).style.display = 'none';
                    currentStep--;
                    document.getElementById(`step-${getStepName(currentStep)}`).style.display = 'block';
                    
                    updateNavigation();
                }
            }
            
            function getStepName(step) {
                const steps = ['', 'salon', 'service', 'datetime', 'confirmation'];
                return steps[step];
            }
            
            function updateNavigation() {
                const prevBtn = document.getElementById('prev-step');
                const nextBtn = document.getElementById('next-step');
                
                prevBtn.style.display = currentStep > 1 ? 'block' : 'none';
                nextBtn.style.display = currentStep < 4 ? 'block' : 'none';
            }
            
            function loadAvailableTimes() {
                if (!selectedData.date || !selectedData.professional) return;
                
                const horariosContainer = document.getElementById('horarios');
                horariosContainer.innerHTML = '';
                
                // Simular hor√°rios dispon√≠veis
                const horarios = ['09:00', '10:00', '11:00', '14:00', '15:00', '16:00', '17:00'];
                
                horarios.forEach(horario => {
                    const button = document.createElement('button');
                    button.type = 'button';
                    button.className = 'time-slot';
                    button.textContent = horario;
                    
                    button.addEventListener('click', function() {
                        document.querySelectorAll('.time-slot').forEach(slot => slot.classList.remove('selected'));
                        this.classList.add('selected');
                        
                        selectedData.time = horario;
                        document.getElementById('next-step').style.display = 'block';
                    });
                    
                    horariosContainer.appendChild(button);
                });
            }
            
            function updateSummary() {
                document.getElementById('summary-salon').textContent = selectedData.salon.name;
                document.getElementById('summary-service').textContent = selectedData.service.name;
                document.getElementById('summary-date').textContent = new Date(selectedData.date).toLocaleDateString('pt-BR');
                document.getElementById('summary-time').textContent = selectedData.time;
                document.getElementById('summary-professional').textContent = selectedData.professional.name;
                document.getElementById('summary-price').textContent = `R$ ${selectedData.price.toFixed(2).replace('.', ',')}`;
            }
            
            function confirmBooking() {
                const confirmBtn = document.getElementById('confirm-booking');
                confirmBtn.disabled = true;
                confirmBtn.textContent = 'Processando...';
                
                setTimeout(() => {
                    notifications.show('Agendamento realizado com sucesso!', 'success');
                    setTimeout(() => {
                        window.location.href = 'payment.html?booking=' + Date.now();
                    }, 2000);
                }, 1500);
            }
        });
        
        function logout() {
            localStorage.clear();
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>